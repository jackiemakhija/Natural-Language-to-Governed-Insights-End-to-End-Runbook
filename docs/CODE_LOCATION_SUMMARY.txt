================================================================================
RUNBOOK CODE ‚Üí FILE LOCATION MAPPING
================================================================================

When you find code in the NL_to_Governed_Insights_End_to_End_Runbook_WITH_CODE_REFS.docx,
it now points to the actual implementation file. Use this quick reference:

PYTHON MODULES (Business Logic)
================================================================================
üìÅ modules/token_manager.py
   ‚Ä¢ acquire_token_azure_cli() - Get token from Azure CLI
   ‚Ä¢ acquire_token_app_registration() - Get token from App Registration
   ‚Ä¢ is_token_valid() - Check token expiry
   ‚Ä¢ get_auth_headers() - Format Authorization header

üìÅ modules/workspace_manager.py
   ‚Ä¢ fetch_workspaces() - List all accessible workspaces
   ‚Ä¢ fetch_datasets() - List datasets in a workspace
   ‚Ä¢ validate_dataset_access() - Check permissions
   ‚Ä¢ get_dataset_tables() - Get table metadata

üìÅ modules/fabric_dax_generator.py
   ‚Ä¢ generate_dax() - LLM generates DAX from natural language
   ‚Ä¢ validate_dax() - Basic DAX syntax validation
   ‚Ä¢ refine_dax() - Improve DAX based on feedback
   ‚Ä¢ extract_dax_from_response() - Clean LLM response

üìÅ modules/power_bi_executor.py
   ‚Ä¢ execute_query() - Run DAX against semantic model
   ‚Ä¢ parse_results_to_dataframe() - Convert results to DataFrame
   ‚Ä¢ format_results_as_json() - Export as JSON
   ‚Ä¢ format_results_as_csv() - Export as CSV

STREAMLIT PAGES (User Interface)
================================================================================
üìÅ pages/workspace_config.py
   ‚Ä¢ workspace_config_page() - Settings page
   ‚Ä¢ Authentication workflow
   ‚Ä¢ Workspace/dataset selection

üìÅ pages/semantic_query.py
   ‚Ä¢ semantic_query_page() - Semantic Query page
   ‚Ä¢ Natural language input
   ‚Ä¢ DAX generation & execution
   ‚Ä¢ Results display

üìÅ app.py
   ‚Ä¢ Main multi-page router
   ‚Ä¢ Chat page with model selection
   ‚Ä¢ Model routing logic (auto vs manual)

SQL EXAMPLES
================================================================================
üìÅ sql/sample_warehouse_setup.sql
   ‚Ä¢ CREATE TABLE dbo.DimDate - Dimension table with dates
   ‚Ä¢ CREATE TABLE dbo.FactSales - Fact table with sales data
   ‚Ä¢ INSERT scripts - Populate sample data
   ‚Ä¢ Aggregation queries - Example SQL analysis

DAX EXAMPLES
================================================================================
üìÅ dax/sample_queries.dax
   1. Total Revenue - Simple ROW query
   2. Revenue This Year - YTD calculation
   3. Revenue by Month - SUMMARIZE query
   4. Revenue by Year - Annual aggregation
   5. Top Performing Months - FILTER with threshold
   6. Profit Margin Analysis - Calculated measures
   7. Year-over-Year Comparison - DATEADD function
   8. Top Products - TOPN ranking
   9. Revenue Trend - Running totals
   10. Segmented Analysis - Multi-dimensional

SETUP & AUTOMATION SCRIPTS
================================================================================
üìÅ scripts/setup_foundry.sh
   ‚Ä¢ Foundry Local installation
   ‚Ä¢ Service startup commands
   ‚Ä¢ Model deployment

üìÅ scripts/setup_auth_azure.ps1
   ‚Ä¢ Azure CLI login
   ‚Ä¢ Token acquisition
   ‚Ä¢ Environment setup

DOCUMENTATION
================================================================================
üìÅ README.md
   ‚Ä¢ Full setup guide
   ‚Ä¢ Usage instructions
   ‚Ä¢ Architecture overview

üìÅ INDEX.md
   ‚Ä¢ Package overview
   ‚Ä¢ Quick start
   ‚Ä¢ File organization

üìÅ RUNBOOK_CODE_MAPPING.md
   ‚Ä¢ Maps runbook sections to files
   ‚Ä¢ Quick lookup table
   ‚Ä¢ Detailed workflow descriptions

üìÅ CODE_REFERENCE_GUIDE.md
   ‚Ä¢ Code pattern ‚Üí file location
   ‚Ä¢ Function index
   ‚Ä¢ Quick reference

================================================================================
HOW TO USE THIS MAPPING
================================================================================

1. Open: NL_to_Governed_Insights_End_to_End_Runbook_WITH_CODE_REFS.docx
2. Find: Code snippet you're interested in
3. Look: At the highlighted reference (e.g., "üìÅ See: modules/token_manager.py")
4. Open: The referenced file in this package
5. Study: The actual implementation
6. Adapt: For your specific needs

================================================================================
QUICK LOOKUP BY TOPIC
================================================================================

Authentication:        modules/token_manager.py
Workspaces:           modules/workspace_manager.py
DAX Generation:       modules/fabric_dax_generator.py
Query Execution:      modules/power_bi_executor.py
Chat Interface:       app.py
Settings Page:        pages/workspace_config.py
Semantic Query Page:  pages/semantic_query.py
SQL Setup:            sql/sample_warehouse_setup.sql
DAX Examples:         dax/sample_queries.dax
Foundry Setup:        scripts/setup_foundry.sh
Azure Auth:           scripts/setup_auth_azure.ps1

================================================================================
FILE PATHS FOR QUICK COPY/PASTE
================================================================================

modules/token_manager.py
modules/workspace_manager.py
modules/fabric_dax_generator.py
modules/power_bi_executor.py
pages/workspace_config.py
pages/semantic_query.py
sql/sample_warehouse_setup.sql
dax/sample_queries.dax
scripts/setup_foundry.sh
scripts/setup_auth_azure.ps1

================================================================================
Last Updated: December 17, 2025
Status: All code locations mapped and verified
================================================================================
